# 🎨 AI Prompt Manager

画像生成AIのプロンプトを効率的に管理・作成するためのChrome拡張機能です。

## 📋 目次

- [主な機能](#主な機能)
- [インストール](#インストール)
- [使い方](#使い方)
  - [基本操作](#基本操作)
  - [プロンプト作成](#プロンプト作成)
  - [パーツ管理](#パーツ管理)
  - [テンプレート管理](#テンプレート管理)
  - [データセット](#データセット)
- [翻訳API設定](#翻訳api設定)
- [データのバックアップ](#データのバックアップ)

---

## 主な機能

✅ **プロンプトパーツ管理**: よく使うプロンプトをパーツとして登録  
✅ **カテゴリ分類**: パーツをカテゴリで整理  
✅ **テンプレート保存**: 完成したプロンプトをテンプレートとして保存  
✅ **自動翻訳**: 英語プロンプトを日本語に翻訳（LibreTranslate/DeepL/GAS対応）  
✅ **データセット切り替え**: 複数の設定を管理・切り替え可能  
✅ **サムネイル対応**: テンプレートに画像を添付可能  

---

## インストール

1. このリポジトリをダウンロードまたはクローン
2. Chromeで `chrome://extensions/` を開く
3. 右上の「デベロッパーモード」をON
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. ダウンロードしたフォルダを選択

---

## 使い方

### 基本操作

1. **起動方法**
   - ブラウザのツールバーにある拡張機能アイコンをクリック
   - 「アプリを開く」ボタンをクリック
   - 別ウィンドウでメインアプリが起動します

2. **画面構成**
   - **プロンプト作成**: メインの作業画面
   - **パーツ**: プロンプトパーツの管理
   - **テンプレート**: 保存済みテンプレートの管理
   - **設定**: API設定やデータ操作

---

### プロンプト作成

#### パーツから選択して作成

1. 左パネルからカテゴリを展開
2. 使いたいパーツをクリック
3. プロンプト入力欄に自動的に追加されます
4. 翻訳文も自動生成されます

#### 直接入力

- プロンプト入力欄に直接英語で入力
- `Ctrl+Enter`（Mac: `Cmd+Enter`）でカンマを自動追加

#### 翻訳機能

- **パーツベース翻訳**: パーツ選択時に自動で翻訳文を生成
- **自動翻訳**: 「🌐 自動翻訳」ボタンで全体を翻訳（API設定が必要）

#### プロンプトの保存

- 「テンプレートとして保存」ボタンで保存
- サムネイル画像も添付可能（右下の「画像」ボックスから）

---

### パーツ管理

#### パーツの追加

1. **パーツ**タブを開く
2. 中央の「パーツを追加」パネルで入力
   - **プロンプト**: 英語のプロンプト文（必須）
   - **翻訳文**: 日本語訳（オプション）
   - **カテゴリ**: 分類先を選択
3. 「パーツを追加」ボタンをクリック

#### パーツの編集

1. 右側のパーツ一覧から「編集」ボタンをクリック
2. 左側のフォームに内容が読み込まれます
3. 修正後「パーツを更新」ボタンをクリック

#### パーツの並び替え

- 右側のパーツ一覧でドラッグ&ドロップ

#### 一括カテゴリ変更

1. 右側のパーツ一覧でチェックボックスを選択（複数可）
2. カテゴリを選択
3. 「カテゴリを変更」ボタンをクリック

---

### テンプレート管理

#### テンプレートの保存

- プロンプト作成画面で「テンプレートとして保存」
- または、**テンプレート**タブで直接作成

#### テンプレートの編集

1. テンプレートカードの「編集」ボタンをクリック
2. 左パネルで内容を編集
3. 「テンプレートを更新」ボタンをクリック

#### テンプレートの適用

- テンプレートカードの「適用」ボタンをクリック
- プロンプト作成画面に内容がコピーされます

#### サムネイル画像

- 編集画面の「サムネイル」エリアをクリック
- または画像ファイルをドラッグ&ドロップ
- 自動的にリサイズされます（最大600px、品質85%）

---

### データセット

データセットは、カテゴリ・パーツ・テンプレート・設定を一つのセットとして管理する機能です。

#### データセットの概念

```
データセット「イラスト用」
├── カテゴリ: スタイル、キャラクター、背景...
├── パーツ: anime style, 1girl, forest...
├── テンプレート: キャラ立ち絵、風景画...
└── 設定: 翻訳API URL等

データセット「写真用」
├── カテゴリ: 構図、照明、被写体...
├── パーツ: portrait, natural light...
├── テンプレート: ポートレート、商品写真...
└── 設定: 翻訳API URL等
```

#### データセットの作成

1. **設定**タブを開く
2. 「データセット切り替え」セクションで設定名を入力
3. 「現在の設定を保存」ボタンをクリック
4. 新しいデータセットが作成されます

#### データセットの切り替え

1. データセット一覧から「切替」ボタンをクリック
2. すべてのデータが切り替わります
3. 作業内容は自動保存されます

#### データセットの複製

- 「複製」ボタンで現在のデータセットをコピー
- 似たような設定を作る時に便利

#### データセットの並び替え

- データセット項目をドラッグ&ドロップ

#### 使用例

**用途別にデータセットを分ける:**
- 「Stable Diffusion用」
- 「Midjourney用」
- 「DALL-E用」

**スタイル別に分ける:**
- 「アニメ・イラスト」
- 「フォトリアル」
- 「抽象画」

**プロジェクト別に分ける:**
- 「プロジェクトA」
- 「個人用」
- 「テスト用」

---

## 翻訳API設定

### 対応API

1. **LibreTranslate** (無料・オープンソース)
2. **DeepL** (高品質・有料/無料プラン)
3. **Google Apps Script** (Google翻訳ベース・無料)
4. **自動判定** (レスポンス形式から自動判定)

### 設定方法

1. **設定**タブを開く
2. 「APIタイプを選択」から使用するAPIを選択
3. API URLを入力
4. 「テスト」ボタンで動作確認
5. 「登録」ボタンで保存

### API URL例

#### LibreTranslate
```
https://libretranslate.de/translate
```

#### DeepL (要APIキー)
```
https://api-free.deepl.com/v2/translate
```
※ APIキーが必要な場合はGASでプロキシを作成してください

#### Google Apps Script
```
https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec
```

**GASスクリプト例:**
```javascript
function doPost(e) {
  const data = JSON.parse(e.postData.contents);
  const text = data.text || data.q;
  const translation = LanguageApp.translate(text, 'en', 'ja');
  return ContentService.createTextOutput(
    JSON.stringify({ translatedText: translation })
  ).setMimeType(ContentService.MimeType.JSON);
}
```

---

## データのバックアップ

### エクスポート

1. **設定**タブを開く
2. 「📤 エクスポート」ボタンをクリック
3. JSONファイルがダウンロードされます

### インポート

1. **設定**タブを開く
2. 「📥 インポート」ボタンをクリック
3. エクスポートしたJSONファイルを選択
4. 確認ダイアログで「OK」をクリック

### 直接編集

- 「現在のデータセットを直接編集(JSON)」ボタンで生のJSONを編集可能
- 上級者向け機能です

---

## キーボードショートカット

| ショートカット | 動作 |
|---------------|------|
| `Ctrl+S` (Mac: `Cmd+S`) | テンプレート保存 |
| `Ctrl+C` (Mac: `Cmd+C`) | プロンプトをコピー |
| `Ctrl+Enter` (Mac: `Cmd+Enter`) | プロンプト入力欄でカンマ追加 |
| `Esc` | モーダルを閉じる |

---

## トラブルシューティング

### データが表示されない

1. ブラウザのコンソールを確認（F12キー）
2. 拡張機能を一度無効化→再度有効化
3. それでも解決しない場合は、設定から「データ初期化」

### 翻訳が動作しない

1. API URLが正しいか確認
2. 「テスト」ボタンで接続確認
3. ネットワーク接続を確認
4. GASの場合、デプロイ設定を確認

### ストレージ容量警告

- 不要なテンプレートやサムネイル画像を削除
- データセットを分割して管理

---

## ライセンス

MIT License

---

## 更新履歴

### v1.0.0
- 初回リリース
- 基本機能実装
- 複数翻訳API対応
- データセット機能追加
